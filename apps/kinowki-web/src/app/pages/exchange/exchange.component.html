<div class="card wide flex-row">
  <p-table
    class="flex-none border-round-2xl overflow-hidden"
    [style.width.%]="40"
    dataKey="_id"
    stateStorage="local"
    stateKey="users"
    selectionMode="single"
    [value]="(value$ | async) ?? []"
    scrollHeight="flex"
    [scrollable]="true"
    [rowHover]="true"
    [lazy]="true"
    [(selection)]="selection"
    (selectionChange)="onUserSelected($event)"
    (onLazyLoad)="lazyLoad($event)">
    <ng-template #header>
      <tr>
        <th [style.width.%]="100">Użytkownik</th>
        <th [style.minWidth.rem]="8" class="text-right">W kolekcji</th>
        <th [style.minWidth.rem]="8" class="text-right">Na wymianę</th>
        <th [style.minWidth.rem]="8" class="text-right">Poszukiwane</th>
      </tr>
    </ng-template>
    <ng-template #body let-user>
      <tr class="table-row" [pSelectableRow]="user">
        <td>
          <div>{{ user.name }}</div>
          <div class="email">{{ user.email }}</div>
        </td>
        <td class="text-right">{{ user.haveTotal }}</td>
        <td class="text-right">{{ user.tradeTotal }}</td>
        <td class="text-right">{{ user.wantTotal }}</td>
      </tr>
    </ng-template>
  </p-table>
  <div class="flex-none" [style.width.%]="2"></div>
</div>
